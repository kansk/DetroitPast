<!DOCTYPE html>
<html>

<head>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.0/ui-bootstrap-tpls.min.js"></script>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet"/>
</head>

<body ng-app="">

<div class="container">

    <div class="row">
        <div ng-controller="customersController">
            <table class="table">
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Year</th>
                </tr>
                </thead>
                <tr ng-repeat="x in places">
                    <td>{{x.name}}</td>
                    <td>{{x.year}}</td>
                </tr>
            </table>
        </div>
    </div>

    <div class="row">

        <div ng-controller="formController">
            <form novalidate>
                Name: <br/><input type="text" ng-model="place.name"> <br/><br/>
                Year: <br/><input type="number" ng-model="place.year"> <br/><br/>
                Latitude: <br/><input type="text" ng-model="place.lat"> <br/><br/>
                Longitude: <br/><input type="text" ng-model="place.long"> <br/><br/>
                <br/><br/>
                <input type="submit" class="btn btn-primary" ng-click="submitForm()">
            </form>
        </div>
    </div>

</div>

</body>
</html>
<script>
    angular.module('myModule', ['ui.bootstrap']);

    var config = {
        headers: {
            'Accept': 'application/json;version=1',
            'Content-Type': 'application/json'
        }
    };

    function customersController($scope, $http) {
        $http.get("http://127.0.0.1/api/places", config)
                .success(function (response) {
                    $scope.places = response;
                });
    }

    function formController($scope, $http) {

//      {"name":"McDonalds","year":1965,"additionalInformation":{"architect":"Ronald McDonald"},"lat":32.36,"long":-93.077}
//        $scope.place = {
//            name: "default",
//            year: 1916,
//            additionalInformation: {},
//            lat: 34.25,
//            long: -53.15
//        };

        $scope.submitForm = function () {
            console.log("posting data....");
            console.log(JSON.stringify($scope.place));

            $http.post('http://127.0.0.1/api/places', JSON.stringify($scope.place), config).success(function (data, status, headers, config) {
            }).error(function (data, status, headers, config) {
                alert('Error: ' + status + ' ' + data);
            });
        };
    }
</script>